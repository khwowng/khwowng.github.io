---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import FormattedDate from "../../components/FormattedDate.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<section class="mx-auto max-w-3xl px-4 py-12">
		<ul class="flex flex-col gap-6">
			{posts.map((post) => (
				<li>
					<a
						href={`/blog/${post.id}/`}
						class="block rounded-md p-4 transition hover:bg-gray-50 dark:hover:bg-neutral-800"
					>
						<h4 class="text-xl font-semibold leading-tight">
							{post.data.title}
						</h4>

						<p class="mt-1 text-sm text-gray-500">
							<FormattedDate date={post.data.pubDate} />
						</p>
					</a>
				</li>
			))}
		</ul>
	</section>
</BaseLayout>